script: transform_crs_expandgrid.py
name: Transform CRS and Expand Grid
description: This script transforms the longitude and latitude coordinates of the provided samples to a specified coordinate reference system (CRS) and adds a grid of points within the extent of the provided coordinates. The user specifies the spacing of the grid points, and the output includes both the transformed coordinates and grid points.
author:
  - name: Miguel Redondo
    email: miguel.angel.redondo@nbis.se
inputs:
  coordinates:
    label: Coordinates table
    description: A csv file with the table of the samples of the locations to transform. The table must have the first 3 columns with the exact names "id", "latitude", "longitude". If this table is used to download from GEE, two more columns with dates are required
    type: text/csv
    example: /userdata/sample_example_short.csv
  crs_input:
    label: Input crs
    description: The coordinate reference system of the input coordinates. For example, "EPSG:4326"
    type: string
    example: EPSG:4326
  crs_output:
    label: Output crs
    description: Output coordinate reference system to use for the transformed coordinates. For example, "EPSG:3006"
    type: string
    example: EPSG:3006
  generate_grid:
    label: Generate grid
    description: Click if the user wants to generate a grid of points
    type: boolean
    example: true
  grid_space:
    label: Grid spacing
    description: Spacing in km for the grid points to be generated within the extent of the provided coordinates. This will create a grid of points spaced at the specified distance.
    type: float
    example: 100.0
  table_local:
    label: Additional WGS84 table
    description: Click if the user wants to generate a table with the points in WGS84 crs for cropping local rasters. If unsure, leave checked. 
    type: boolean
    example: true
outputs:
  coordinates_trans_gee:
    label: Transformed coordinates 
    description: A csv file with the transformed coordinates for downloading from Google Earth Engine
    type: text/csv
  coordinates_trans_local:
    label: Transformed coordinates for local rasters
    description: A csv file with the transformed coordinates for cropping local rasters.
    type: text/csv
  crs_output:
    label: Output crs
    description: Coordinate reference system used to transform the input coordinates. For example, "EPSG:4326"
    type: string
conda:
  channels:
    - conda-forge
  dependencies:
    - proj
    - pathlib
    - requests
    - pip
    - pip:
      - pandas
      - pyproj
      - shapely
      - geopandas
      - geopy
      - pycountry
      - numpy